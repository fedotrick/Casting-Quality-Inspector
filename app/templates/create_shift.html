{% extends "base.html" %}

{% block title %}–°–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ–Ω—ã{% endblock %}

{% block content %}
<h1>üìã –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–º–µ–Ω—ã</h1>

<form method="POST" action="{{ url_for('ui.create_shift_route') }}">
    <div style="margin-bottom: 20px;">
        <label for="date">–î–∞—Ç–∞ —Å–º–µ–Ω—ã:</label>
        <input type="date" id="date" name="date" required style="width: 100%;">
    </div>
    
    <div style="margin-bottom: 20px;">
        <label for="shift_number">–ù–æ–º–µ—Ä —Å–º–µ–Ω—ã:</label>
        <select id="shift_number" name="shift_number" required style="width: 100%;">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–º–µ–Ω—É</option>
            <option value="1">–°–º–µ–Ω–∞ 1 (07:00 - 19:00)</option>
            <option value="2">–°–º–µ–Ω–∞ 2 (19:00 - 07:00)</option>
        </select>
    </div>
    
    <div style="margin-bottom: 20px;">
        <label>–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ã:</label>
        {% if controllers %}
            {% for controller in controllers %}
            <div style="margin: 5px 0;">
                <input type="checkbox" id="controller_{{ controller.id }}" name="controllers" value="{{ controller.–∏–º—è }}">
                <label for="controller_{{ controller.id }}" style="display: inline; font-weight: normal;">{{ controller.–∏–º—è }}</label>
            </div>
            {% endfor %}
        {% else %}
            <p style="color: #856404;">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–æ–≤. <a href="{{ url_for('ui.manage_controllers') }}">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞</a></p>
        {% endif %}
    </div>
    
    <button type="submit" class="btn btn-success">‚úÖ –°–æ–∑–¥–∞—Ç—å —Å–º–µ–Ω—É</button>
    <a href="{{ url_for('ui.index') }}" class="btn btn-secondary">‚ùå –û—Ç–º–µ–Ω–∞</a>
</form>
{% endblock %}

{% block extra_js %}
<script>
// Set today's date by default
document.addEventListener('DOMContentLoaded', function() {
    const dateInput = document.getElementById('date');
    const today = new Date().toISOString().split('T')[0];
    dateInput.value = today;
    
    // Auto-select shift based on current time
    const currentHour = new Date().getHours();
    const shiftSelect = document.getElementById('shift_number');
    if (currentHour >= 7 && currentHour < 19) {
        shiftSelect.value = '1';
    } else {
        shiftSelect.value = '2';
    }
});
</script>
{% endblock %}
