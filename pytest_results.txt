============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.4.2, pluggy-1.6.0 -- /usr/bin/python
cachedir: .pytest_cache
rootdir: /home/engine/project
configfile: pytest.ini
plugins: cov-7.0.0, mock-3.15.1, flask-1.3.0
collecting ... collected 181 items

tests/test_api.py::TestCurrentShiftAPI::test_api_current_shift_with_active_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:32 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:32 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:32 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:32 [    INFO] Database tables created successfully
2025-10-31 13:18:32 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:32 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:32 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:32 [    INFO] Created defect category: Доработка
2025-10-31 13:18:32 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:32 [    INFO] Loaded defect types successfully
2025-10-31 13:18:32 [    INFO] Default data initialization completed
2025-10-31 13:18:32 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:32 [    INFO] Application created successfully
2025-10-31 13:18:32 [    INFO] Database tables created successfully
2025-10-31 13:18:32 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:32 [    INFO] Default data initialization completed
FAILED
tests/test_api.py::TestCurrentShiftAPI::test_api_current_shift_no_active_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:32 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:32 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:32 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:32 [    INFO] Database tables created successfully
2025-10-31 13:18:32 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_api.py::TestCloseShiftAPI::test_api_close_shift_success 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [    INFO] Auto-close expired shifts completed
2025-10-31 13:18:33 [    INFO] Auto-close expired shifts completed
2025-10-31 13:18:33 [    INFO] Closed shift 1
2025-10-31 13:18:33 [    INFO] Closed shift 1
2025-10-31 13:18:33 [    INFO] Shift 1 closed successfully via API
PASSED
tests/test_api.py::TestCloseShiftAPI::test_api_close_shift_no_active_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [    INFO] Auto-close expired shifts completed
2025-10-31 13:18:33 [    INFO] Auto-close expired shifts completed
2025-10-31 13:18:33 [ WARNING] Attempt to close shift without active shift
PASSED
tests/test_api.py::TestDefectTypesAPI::test_api_get_defect_types 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
FAILED
tests/test_api.py::TestControllersAPI::test_api_get_controllers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
FAILED
tests/test_api.py::TestControllersAPI::test_api_add_controller 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_api.py::TestControllersAPI::test_api_toggle_controller 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_api.py::TestQRScanAPI::test_api_qr_scan_valid 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [    INFO] ОПЕРАЦИЯ: {
  "operation": "Successful QR scan",
  "timestamp": "2025-10-31T13:18:33.279649",
  "user_info": {
    "ip": "127.0.0.1",
    "user_agent": "Werkzeug/3.1.3",
    "endpoint": "api.api_qr_scan",
    "method": "POST",
    "url": "http://localhost/api/qr-scan"
  },
  "details": {
    "card_number": "123456"
  }
}
PASSED
tests/test_api.py::TestQRScanAPI::test_api_qr_scan_empty 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [ WARNING] Empty QR code in request
PASSED
tests/test_api.py::TestQRScanAPI::test_api_qr_scan_invalid_json 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [   ERROR] Error processing QR scan: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand.
PASSED
tests/test_api.py::TestValidateControlAPI::test_api_validate_control_valid 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_api.py::TestValidateControlAPI::test_api_validate_control_invalid 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_api.py::TestStatisticsAPI::test_api_shift_statistics 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 111111
PASSED
tests/test_api.py::TestAPIErrorHandling::test_api_404_not_found 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_api.py::TestAPIErrorHandling::test_api_method_not_allowed 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_api.py::TestAPIErrorHandling::test_api_invalid_json 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [   ERROR] Error processing QR scan: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand.
PASSED
tests/test_api.py::TestCORSHeaders::test_cors_headers_present 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_control_records.py::TestControlRecordCreation::test_save_control_record_success 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 123456
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 123456
PASSED
tests/test_control_records.py::TestControlRecordCreation::test_save_control_record_with_multiple_defects 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 654321
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 654321
PASSED
tests/test_control_records.py::TestControlRecordCreation::test_save_control_record_no_defects 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 111111
PASSED
tests/test_control_records.py::TestControlDataValidation::test_validate_control_data_valid 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_control_records.py::TestControlDataValidation::test_validate_control_data_zero_cast 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_control_records.py::TestControlDataValidation::test_validate_control_data_negative_accepted 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_control_records.py::TestControlDataValidation::test_validate_control_data_accepted_exceeds_cast 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_control_records.py::TestControlDataValidation::test_validate_control_data_mismatch_warning 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_control_records.py::TestControlDataValidation::test_validate_control_data_high_reject_rate 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_control_records.py::TestControlDataValidation::test_validate_control_data_negative_defect_count 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
PASSED
tests/test_control_records.py::TestControlRepository::test_get_records_by_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 123456
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 123456
PASSED
tests/test_control_records.py::TestControlRepository::test_check_duplicate_card 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:33 [    INFO] Created defect category: Доработка
2025-10-31 13:18:33 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:33 [    INFO] Loaded defect types successfully
2025-10-31 13:18:33 [    INFO] Default data initialization completed
2025-10-31 13:18:33 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:33 [    INFO] Application created successfully
2025-10-31 13:18:33 [    INFO] Database tables created successfully
2025-10-31 13:18:33 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:33 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 999999
2025-10-31 13:18:33 [    INFO] Saved control record 1 for card 999999
PASSED
tests/test_control_records.py::TestControlRepository::test_check_duplicate_card_different_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:33 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:33 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Saved control record 1 for card 888888
2025-10-31 13:18:34 [    INFO] Saved control record 1 for card 888888
PASSED
tests/test_control_records.py::TestQualityMetrics::test_calculate_quality_metrics 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:34 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:34 [    INFO] Saved control record 2 for card 222222
2025-10-31 13:18:34 [    INFO] Saved control record 2 for card 222222
PASSED
tests/test_database_layer.py::TestControllerOperations::test_add_controller 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Added controller: Test Controller
PASSED
tests/test_database_layer.py::TestControllerOperations::test_get_all_controllers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Added controller: Controller 1
2025-10-31 13:18:34 [    INFO] Added controller: Controller 2
PASSED
tests/test_database_layer.py::TestControllerOperations::test_toggle_controller 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Added controller: Toggle Test
2025-10-31 13:18:34 [    INFO] Toggled controller 4 status to False
PASSED
tests/test_database_layer.py::TestDefectOperations::test_get_defect_types_grouped 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
PASSED
tests/test_database_layer.py::TestShiftOperations::test_create_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Created shift 1 for date 2025-04-18, shift number 1
PASSED
tests/test_database_layer.py::TestShiftOperations::test_duplicate_shift_prevention 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Created shift 2 for date 2025-03-09, shift number 1
2025-10-31 13:18:34 [   ERROR] Error creating shift: Смена 1 на дату 2025-03-09 уже активна
PASSED
tests/test_database_layer.py::TestShiftOperations::test_close_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Created shift 3 for date 2025-07-28, shift number 2
2025-10-31 13:18:34 [    INFO] Closed shift 3
PASSED
tests/test_database_layer.py::TestControlRecordOperations::test_save_control_record 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Created shift 4 for date 2025-09-04, shift number 1
2025-10-31 13:18:34 [    INFO] Saved control record 1 for card 123456
PASSED
tests/test_database_layer.py::TestControlRecordOperations::test_check_card_processed 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Created shift 5 for date 2025-06-26, shift number 1
2025-10-31 13:18:34 [    INFO] Saved control record 2 for card 999999
PASSED
tests/test_database_layer.py::TestControlRecordOperations::test_get_shift_statistics 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Created shift 6 for date 2025-03-04, shift number 1
2025-10-31 13:18:34 [    INFO] Saved control record 3 for card 111111
2025-10-31 13:18:34 [    INFO] Saved control record 4 for card 222222
PASSED
tests/test_database_layer.py::TestDatabaseIntegrity::test_foreign_key_constraints 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
PASSED
tests/test_database_layer.py::TestDatabaseIntegrity::test_unique_constraints 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Added controller: Unique Test
PASSED
tests/test_database_layer.py::TestCyrillicTableNames::test_table_names_are_cyrillic 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
PASSED
tests/test_error_handlers.py::TestCustomExceptions::test_database_error 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestCustomExceptions::test_integration_error 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestCustomExceptions::test_validation_error 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestCustomExceptions::test_exception_message 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestErrorHandler::test_error_handler_exists 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestErrorHandler::test_log_user_error 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [   ERROR] User Error: Test error message
PASSED
tests/test_error_handlers.py::TestLogErrorAndRespond::test_log_error_with_context 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [   ERROR] User Error: Test message: Test error - ui.index - None
2025-10-31 13:18:34 [   ERROR] ОШИБКА: {
  "error": "Test error",
  "error_type": "ValueError",
  "timestamp": "2025-10-31T13:18:34.517898",
  "context": {
    "message": "Test message",
    "status_code": 500
  },
  "traceback": "NoneType: None\n"
}
PASSED
tests/test_error_handlers.py::TestLogErrorAndRespond::test_log_error_without_context 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [   ERROR] User Error: Test message: Test error - ui.index - None
2025-10-31 13:18:34 [   ERROR] ОШИБКА: {
  "error": "Test error",
  "error_type": "ValueError",
  "timestamp": "2025-10-31T13:18:34.545449",
  "context": {
    "message": "Test message",
    "status_code": 400
  },
  "traceback": "NoneType: None\n"
}
PASSED
tests/test_error_handlers.py::TestValidateAndHandleErrors::test_decorator_on_successful_function 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestValidateAndHandleErrors::test_decorator_on_failing_function 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [   ERROR] User Error: Внутренняя ошибка сервера: Test error - ui.index - None
2025-10-31 13:18:34 [   ERROR] ОШИБКА: {
  "error": "Test error",
  "error_type": "ValueError",
  "timestamp": "2025-10-31T13:18:34.601797",
  "context": {
    "message": "Внутренняя ошибка сервера",
    "status_code": 500
  },
  "traceback": "Traceback (most recent call last):\n  File \"/home/engine/project/app/helpers/error_handlers.py\", line 84, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/engine/project/tests/test_error_handlers.py\", line 107, in failing_function\n    raise ValueError(\"Test error\")\nValueError: Test error\n"
}
PASSED
tests/test_error_handlers.py::TestDatabaseErrorHandling::test_handle_database_error_decorator 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestIntegrationErrorHandling::test_handle_integration_error_non_critical 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [ WARNING] Non-critical integration error in function_with_integration_error: Test integration error
PASSED
tests/test_error_handlers.py::TestIntegrationErrorHandling::test_handle_integration_error_critical 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestValidationErrorHandling::test_handle_validation_error 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestErrorResponseFormat::test_error_response_structure 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [   ERROR] User Error: Произошла ошибка: Test - ui.index - None
2025-10-31 13:18:34 [   ERROR] ОШИБКА: {
  "error": "Test",
  "error_type": "ValueError",
  "timestamp": "2025-10-31T13:18:34.746863",
  "context": {
    "message": "Произошла ошибка",
    "status_code": 500
  },
  "traceback": "NoneType: None\n"
}
PASSED
tests/test_error_handlers.py::TestErrorResponseFormat::test_error_id_included 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [   ERROR] User Error: Произошла ошибка: Test - ui.index - None
2025-10-31 13:18:34 [   ERROR] ОШИБКА: {
  "error": "Test",
  "error_type": "ValueError",
  "timestamp": "2025-10-31T13:18:34.776165",
  "context": {
    "message": "Произошла ошибка",
    "status_code": 500
  },
  "traceback": "NoneType: None\n"
}
PASSED
tests/test_error_handlers.py::TestErrorPropagation::test_service_layer_error_propagation 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Closed shift 99999
PASSED
tests/test_error_handlers.py::TestErrorPropagation::test_repository_layer_error_handling 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestConcurrentErrorHandling::test_multiple_validation_errors 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestConcurrentErrorHandling::test_error_accumulation 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestErrorRecovery::test_rollback_on_error 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_error_handlers.py::TestErrorRecovery::test_graceful_degradation 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Default data initialization completed
PASSED
tests/test_integration.py::TestApplicationFlow::test_controller_workflow 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:34 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:34 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:34 [    INFO] Created defect category: Доработка
2025-10-31 13:18:34 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:34 [    INFO] Loaded defect types successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:34 [    INFO] Added controller: Test Controller Integration
2025-10-31 13:18:34 [    INFO] Added controller: Test Controller Integration
PASSED
tests/test_integration.py::TestApplicationFlow::test_defect_types_loaded 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
PASSED
tests/test_integration.py::TestApplicationFlow::test_complete_shift_workflow 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:34 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:34 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:34 [    INFO] Database tables created successfully
2025-10-31 13:18:34 [    INFO] Default data initialization completed
2025-10-31 13:18:34 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:34 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Created shift 1 for date 2025-03-15, shift number 1
2025-10-31 13:18:35 [    INFO] Created shift 1 for date 2025-03-15, shift number 1
2025-10-31 13:18:35 [    INFO] Closed shift 1
2025-10-31 13:18:35 [    INFO] Closed shift 1
PASSED
tests/test_integration.py::TestApplicationFlow::test_control_record_workflow 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Created shift 2 for date 2025-04-20, shift number 1
2025-10-31 13:18:35 [    INFO] Created shift 2 for date 2025-04-20, shift number 1
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 123456
2025-10-31 13:18:35 [ WARNING] Route cards database not found: C:\Users\1\Telegram\FoamFusionLab\data\маршрутные_карты.db
2025-10-31 13:18:35 [ WARNING] Could not connect to маршрутные_карты.db to update status
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 123456
PASSED
tests/test_quality_metrics_enhancements.py::TestQualityMetricsWithShiftId::test_calculate_metrics_from_shift_id 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:35 [    INFO] Saved control record 2 for card 222222
2025-10-31 13:18:35 [    INFO] Saved control record 2 for card 222222
PASSED
tests/test_quality_metrics_enhancements.py::TestQualityMetricsWithShiftId::test_calculate_metrics_backwards_compatible 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_quality_metrics_enhancements.py::TestQualityMetricsWithShiftId::test_calculate_metrics_empty_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_quality_metrics_enhancements.py::TestRepositoryStatisticsEnhancements::test_shift_statistics_includes_quality_rate 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
PASSED
tests/test_quality_metrics_enhancements.py::TestRepositoryStatisticsEnhancements::test_shift_statistics_with_multiple_records 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:35 [    INFO] Saved control record 2 for card 222222
2025-10-31 13:18:35 [    INFO] Saved control record 2 for card 222222
PASSED
tests/test_quality_metrics_enhancements.py::TestCascadeDelete::test_defects_cascade_deleted_with_record 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
PASSED
tests/test_quality_metrics_enhancements.py::TestCascadeDelete::test_multiple_defects_cascade_deleted 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
PASSED
tests/test_quality_metrics_enhancements.py::TestAPIEndpointEnhancements::test_api_calculate_with_shift_id 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
PASSED
tests/test_quality_metrics_enhancements.py::TestAPIEndpointEnhancements::test_api_calculate_backwards_compatible 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestControllerRepository::test_get_all_controllers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestControllerRepository::test_get_active_controllers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestControllerRepository::test_create_controller 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Added controller: Тестов Т.Т.
PASSED
tests/test_repositories.py::TestControllerRepository::test_toggle_controller 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Toggled controller 4 status to False
PASSED
tests/test_repositories.py::TestControllerRepository::test_get_controller_by_id 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestDefectRepository::test_get_all_categories 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestDefectRepository::test_get_all_defect_types 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestDefectRepository::test_get_types_by_category 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestDefectRepository::test_get_defect_type_by_id 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestShiftRepositoryAdvanced::test_get_shifts_by_date_range 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestShiftRepositoryAdvanced::test_get_shift_by_id 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestShiftRepositoryAdvanced::test_get_recent_shifts 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestControlRepositoryAdvanced::test_save_record_with_validation 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 555555
PASSED
tests/test_repositories.py::TestControlRepositoryAdvanced::test_get_record_by_id 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 444444
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 444444
PASSED
tests/test_repositories.py::TestControlRepositoryAdvanced::test_get_records_count 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 111111
PASSED
tests/test_repositories.py::TestControlRepositoryAdvanced::test_get_records_with_defects 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 333333
2025-10-31 13:18:35 [    INFO] Saved control record 1 for card 333333
PASSED
tests/test_repositories.py::TestRepositoryErrorHandling::test_get_nonexistent_controller 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:35 [    INFO] Created defect category: Доработка
2025-10-31 13:18:35 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:35 [    INFO] Loaded defect types successfully
2025-10-31 13:18:35 [    INFO] Default data initialization completed
2025-10-31 13:18:35 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:35 [    INFO] Application created successfully
2025-10-31 13:18:35 [    INFO] Database tables created successfully
2025-10-31 13:18:35 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:35 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestRepositoryErrorHandling::test_get_nonexistent_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:35 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:35 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:35 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_repositories.py::TestRepositoryErrorHandling::test_toggle_nonexistent_controller 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestRouteCardValidation::test_validate_route_card_valid 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestRouteCardValidation::test_validate_route_card_invalid_length 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestRouteCardValidation::test_validate_route_card_non_numeric 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestRouteCardValidation::test_validate_route_card_empty 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestRouteCardSearch::test_search_route_card_found 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestRouteCardSearch::test_search_route_card_not_found 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestRouteCardSearch::test_search_route_card_invalid_format 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestDuplicateCardCheck::test_check_card_not_processed 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestDuplicateCardCheck::test_check_card_already_processed 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:36 [    INFO] Saved control record 1 for card 777777
2025-10-31 13:18:36 [    INFO] Saved control record 1 for card 777777
PASSED
tests/test_route_cards.py::TestRouteCardAPIIntegration::test_api_search_card_success 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:36 [    INFO] ОПЕРАЦИЯ: {
  "operation": "Route card search",
  "timestamp": "2025-10-31T13:18:36.444606",
  "user_info": {
    "ip": "127.0.0.1",
    "user_agent": "Werkzeug/3.1.3",
    "endpoint": "api.search_card",
    "method": "GET",
    "url": "http://localhost/api/search-card/123456"
  },
  "details": {
    "card_number": "123456",
    "found": true
  }
}
PASSED
tests/test_route_cards.py::TestRouteCardAPIIntegration::test_api_search_card_not_found 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:36 [    INFO] ОПЕРАЦИЯ: {
  "operation": "Route card search",
  "timestamp": "2025-10-31T13:18:36.478278",
  "user_info": {
    "ip": "127.0.0.1",
    "user_agent": "Werkzeug/3.1.3",
    "endpoint": "api.search_card",
    "method": "GET",
    "url": "http://localhost/api/search-card/999999"
  },
  "details": {
    "card_number": "999999",
    "found": false
  }
}
PASSED
tests/test_route_cards.py::TestRouteCardAPIIntegration::test_api_search_card_invalid_format 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_route_cards.py::TestRouteCardAPIIntegration::test_api_search_card_already_processed 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:36 [    INFO] Saved control record 1 for card 123456
2025-10-31 13:18:36 [    INFO] Saved control record 1 for card 123456
PASSED
tests/test_security.py::TestInputValidation::test_validate_route_card_number_valid PASSED
tests/test_security.py::TestInputValidation::test_validate_route_card_number_invalid PASSED
tests/test_security.py::TestInputValidation::test_validate_positive_integer_valid PASSED
tests/test_security.py::TestInputValidation::test_validate_positive_integer_invalid PASSED
tests/test_security.py::TestInputValidation::test_sanitize_string PASSED
tests/test_security.py::TestInputValidation::test_sanitize_string_preserves_single_quotes PASSED
tests/test_security.py::TestInputValidation::test_sanitize_string_xss_protection PASSED
tests/test_security.py::TestInputValidation::test_sanitize_string_edge_cases PASSED
tests/test_security.py::TestInputValidation::test_validate_table_name_whitelist PASSED
tests/test_security.py::TestInputValidation::test_validate_column_name_whitelist PASSED
tests/test_security.py::TestPydanticValidation::test_control_data_request_valid PASSED
tests/test_security.py::TestPydanticValidation::test_control_data_request_invalid_card_number PASSED
tests/test_security.py::TestPydanticValidation::test_control_data_request_accepted_exceeds_cast PASSED
tests/test_security.py::TestPydanticValidation::test_shift_create_request_valid PASSED
tests/test_security.py::TestPydanticValidation::test_shift_create_request_invalid_shift_number PASSED
tests/test_security.py::TestPydanticValidation::test_shift_create_request_no_controllers PASSED
tests/test_security.py::TestPathTraversal::test_detect_path_traversal_attempts PASSED
tests/test_shifts.py::TestShiftCreation::test_create_shift_success 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:36 [    INFO] Created shift 1 for date 2025-10-31, shift number 1
2025-10-31 13:18:36 [    INFO] Created shift 1 for date 2025-10-31, shift number 1
PASSED
tests/test_shifts.py::TestShiftCreation::test_create_shift_with_multiple_controllers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:36 [    INFO] Created shift 1 for date 2025-10-31, shift number 2
2025-10-31 13:18:36 [    INFO] Created shift 1 for date 2025-10-31, shift number 2
PASSED
tests/test_shifts.py::TestShiftCreation::test_create_shift_future_date 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:36 [    INFO] Created shift 1 for date 2025-11-01, shift number 1
2025-10-31 13:18:36 [    INFO] Created shift 1 for date 2025-11-01, shift number 1
PASSED
tests/test_shifts.py::TestShiftValidation::test_validate_shift_data_valid 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftValidation::test_validate_shift_data_missing_date 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftValidation::test_validate_shift_data_invalid_shift_number 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftValidation::test_validate_shift_data_no_controllers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftValidation::test_validate_shift_data_duplicate_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftValidation::test_validate_shift_data_far_future 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftClosure::test_close_shift_success 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:36 [    INFO] Closed shift 1
2025-10-31 13:18:36 [    INFO] Closed shift 1
PASSED
tests/test_shifts.py::TestShiftClosure::test_close_nonexistent_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:36 [    INFO] Closed shift 99999
PASSED
tests/test_shifts.py::TestShiftRepository::test_get_active_shift 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftRepository::test_check_duplicate 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftRepository::test_check_duplicate_no_conflict 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:36 [    INFO] Loaded defect types successfully
2025-10-31 13:18:36 [    INFO] Default data initialization completed
2025-10-31 13:18:36 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:36 [    INFO] Application created successfully
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftRepository::test_get_all_shifts 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:36 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:36 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:36 [    INFO] Database tables created successfully
2025-10-31 13:18:36 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:36 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:36 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:36 [    INFO] Created defect category: Доработка
2025-10-31 13:18:36 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftRepository::test_check_duplicate_closed_shift_not_blocking 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:37 [    INFO] Closed shift 1
2025-10-31 13:18:37 [    INFO] Created shift 2 for date 2025-10-31, shift number 1
PASSED
tests/test_shifts.py::TestShiftRepository::test_check_duplicate_with_exclude_shift_id 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_shifts.py::TestShiftRepository::test_check_duplicate_case_insensitive_status 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:37 [    INFO] Created shift 1 for date 2025-10-31, shift number 1
PASSED
tests/test_shifts.py::TestShiftRepository::test_check_duplicate_multiple_statuses 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:37 [    INFO] Closed shift 1
PASSED
tests/test_shifts.py::TestShiftCreationAfterClosure::test_create_shift_after_closing_previous 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:37 [    INFO] Created shift 1 for date 2025-10-31, shift number 1
2025-10-31 13:18:37 [    INFO] Created shift 1 for date 2025-10-31, shift number 1
2025-10-31 13:18:37 [   ERROR] Error creating shift: Смена 1 на дату 2025-10-31 уже активна
2025-10-31 13:18:37 [   ERROR] Error creating shift: Смена 1 на дату 2025-10-31 уже активна
2025-10-31 13:18:37 [    INFO] Closed shift 1
2025-10-31 13:18:37 [    INFO] Closed shift 1
2025-10-31 13:18:37 [    INFO] Created shift 2 for date 2025-10-31, shift number 1
2025-10-31 13:18:37 [    INFO] Created shift 2 for date 2025-10-31, shift number 1
PASSED
tests/test_shifts.py::TestShiftCreationAfterClosure::test_validation_allows_shift_after_closure 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:37 [    INFO] Created shift 1 for date 2025-10-31, shift number 2
2025-10-31 13:18:37 [    INFO] Created shift 1 for date 2025-10-31, shift number 2
2025-10-31 13:18:37 [    INFO] Closed shift 1
2025-10-31 13:18:37 [    INFO] Closed shift 1
PASSED
tests/test_shifts.py::TestAutoCloseShifts::test_auto_close_expired_shifts 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
-------------------------------- live log call ---------------------------------
2025-10-31 13:18:37 [    INFO] Created shift 1 for date 2025-10-30, shift number 1
2025-10-31 13:18:37 [    INFO] Created shift 1 for date 2025-10-30, shift number 1
2025-10-31 13:18:37 [    INFO] Auto-close expired shifts completed
2025-10-31 13:18:37 [    INFO] Auto-close expired shifts completed
PASSED
tests/test_shifts.py::TestShiftStatistics::test_get_shift_statistics 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestRouteCardValidation::test_valid_card_numbers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestRouteCardValidation::test_invalid_card_numbers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestPositiveIntegerValidation::test_valid_positive_integers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestPositiveIntegerValidation::test_invalid_positive_integers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestInputDataValidation::test_valid_input_data 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestInputDataValidation::test_missing_required_fields 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestInputDataValidation::test_empty_field_values 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestShiftDataValidation::test_valid_shift_data 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestShiftDataValidation::test_invalid_date_format 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestShiftDataValidation::test_shift_number_validation 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestControlDataValidation::test_perfect_data 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestControlDataValidation::test_negative_values 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestControlDataValidation::test_mismatch_calculation 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestControlDataValidation::test_very_high_reject_rate 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestControlDataValidation::test_very_large_numbers 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestJSONInputValidation::test_valid_json_schema 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestJSONInputValidation::test_missing_fields 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestJSONInputValidation::test_wrong_types 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestFormInputValidation::test_valid_form_data 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:37 [    INFO] Application created successfully
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestFormInputValidation::test_invalid_form_data 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:37 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:37 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:37 [    INFO] Database tables created successfully
2025-10-31 13:18:37 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:37 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:37 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:37 [    INFO] Created defect category: Доработка
2025-10-31 13:18:37 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:37 [    INFO] Loaded defect types successfully
2025-10-31 13:18:37 [    INFO] Default data initialization completed
2025-10-31 13:18:37 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestEdgeCases::test_boundary_values 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:38 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:38 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:38 [    INFO] Created defect category: Доработка
2025-10-31 13:18:38 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:38 [    INFO] Loaded defect types successfully
2025-10-31 13:18:38 [    INFO] Default data initialization completed
2025-10-31 13:18:38 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestEdgeCases::test_unicode_handling 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:38 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:38 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:38 [    INFO] Created defect category: Доработка
2025-10-31 13:18:38 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:38 [    INFO] Loaded defect types successfully
2025-10-31 13:18:38 [    INFO] Default data initialization completed
2025-10-31 13:18:38 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestEdgeCases::test_whitespace_handling 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:38 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:38 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:38 [    INFO] Created defect category: Доработка
2025-10-31 13:18:38 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:38 [    INFO] Loaded defect types successfully
2025-10-31 13:18:38 [    INFO] Default data initialization completed
2025-10-31 13:18:38 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestSanitization::test_sanitize_preserves_single_quotes 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:38 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:38 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:38 [    INFO] Created defect category: Доработка
2025-10-31 13:18:38 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:38 [    INFO] Loaded defect types successfully
2025-10-31 13:18:38 [    INFO] Default data initialization completed
2025-10-31 13:18:38 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestSanitization::test_sanitize_encodes_dangerous_characters 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:38 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:38 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:38 [    INFO] Created defect category: Доработка
2025-10-31 13:18:38 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:38 [    INFO] Loaded defect types successfully
2025-10-31 13:18:38 [    INFO] Default data initialization completed
2025-10-31 13:18:38 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestSanitization::test_sanitize_xss_attempts 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:38 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:38 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:38 [    INFO] Created defect category: Доработка
2025-10-31 13:18:38 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:38 [    INFO] Loaded defect types successfully
2025-10-31 13:18:38 [    INFO] Default data initialization completed
2025-10-31 13:18:38 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestSanitization::test_sanitize_mixed_content 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:38 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:38 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:38 [    INFO] Created defect category: Доработка
2025-10-31 13:18:38 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:38 [    INFO] Loaded defect types successfully
2025-10-31 13:18:38 [    INFO] Default data initialization completed
2025-10-31 13:18:38 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestSanitization::test_sanitize_edge_cases 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:38 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:38 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:38 [    INFO] Created defect category: Доработка
2025-10-31 13:18:38 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:38 [    INFO] Loaded defect types successfully
2025-10-31 13:18:38 [    INFO] Default data initialization completed
2025-10-31 13:18:38 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED
tests/test_validators.py::TestSanitization::test_sanitize_real_world_scenarios 
-------------------------------- live log setup --------------------------------
2025-10-31 13:18:38 [    INFO] Starting Quality Control Application with config: testing
2025-10-31 13:18:38 [    INFO] Registered database teardown with Flask app
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy engine for database: :memory:
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Created SQLAlchemy session factory
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Created defect category: Второй сорт
2025-10-31 13:18:38 [    INFO] Created defect category: Доработка
2025-10-31 13:18:38 [    INFO] Created defect category: Окончательный брак
2025-10-31 13:18:38 [    INFO] Loaded defect types successfully
2025-10-31 13:18:38 [    INFO] Default data initialization completed
2025-10-31 13:18:38 [    INFO] Database initialized successfully with SQLAlchemy
2025-10-31 13:18:38 [    INFO] Application created successfully
2025-10-31 13:18:38 [    INFO] Database tables created successfully
2025-10-31 13:18:38 [    INFO] Controllers table is empty, but not adding default ones
2025-10-31 13:18:38 [    INFO] Default data initialization completed
PASSED

=================================== FAILURES ===================================
_________ TestCurrentShiftAPI.test_api_current_shift_with_active_shift _________
tests/test_api.py:22: in test_api_current_shift_with_active_shift
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
        app        = <Flask 'app'>
        client     = <FlaskClient <Flask 'app'>>
        response   = <WrapperTestResponse streamed [404 NOT FOUND]>
        sample_shift = <Смена(id=1, дата='2025-10-31', номер_смены=1, статус='активна')>
        self       = <tests.test_api.TestCurrentShiftAPI object at 0x7fe8d4441a30>
        sess       = <SecureCookieSession {'current_shift_id': 1}>
------------------------------ Captured log setup ------------------------------
INFO     app:__init__.py:37 Starting Quality Control Application with config: testing
INFO     app.database.session:session.py:140 Registered database teardown with Flask app
INFO     app.database.session:session.py:46 Created SQLAlchemy engine for database: :memory:
INFO     app.database.session:session.py:117 Database tables created successfully
INFO     app.database.session:session.py:64 Created SQLAlchemy session factory
INFO     app.database.init_data:init_data.py:23 Controllers table is empty, but not adding default ones
INFO     app.database.init_data:init_data.py:54 Created defect category: Второй сорт
INFO     app.database.init_data:init_data.py:54 Created defect category: Доработка
INFO     app.database.init_data:init_data.py:54 Created defect category: Окончательный брак
INFO     app.database.init_data:init_data.py:74 Loaded defect types successfully
INFO     app.database.init_data:init_data.py:29 Default data initialization completed
INFO     app:__init__.py:51 Database initialized successfully with SQLAlchemy
INFO     app:__init__.py:63 Application created successfully
INFO     app.database.session:session.py:117 Database tables created successfully
INFO     app.database.init_data:init_data.py:23 Controllers table is empty, but not adding default ones
INFO     app.database.init_data:init_data.py:29 Default data initialization completed
_________________ TestDefectTypesAPI.test_api_get_defect_types _________________
tests/test_api.py:82: in test_api_get_defect_types
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
        app        = <Flask 'app'>
        client     = <FlaskClient <Flask 'app'>>
        response   = <WrapperTestResponse streamed [404 NOT FOUND]>
        self       = <tests.test_api.TestDefectTypesAPI object at 0x7fe8d4442390>
------------------------------ Captured log setup ------------------------------
INFO     app:__init__.py:37 Starting Quality Control Application with config: testing
INFO     app.database.session:session.py:140 Registered database teardown with Flask app
INFO     app.database.session:session.py:46 Created SQLAlchemy engine for database: :memory:
INFO     app.database.session:session.py:117 Database tables created successfully
INFO     app.database.session:session.py:64 Created SQLAlchemy session factory
INFO     app.database.init_data:init_data.py:23 Controllers table is empty, but not adding default ones
INFO     app.database.init_data:init_data.py:54 Created defect category: Второй сорт
INFO     app.database.init_data:init_data.py:54 Created defect category: Доработка
INFO     app.database.init_data:init_data.py:54 Created defect category: Окончательный брак
INFO     app.database.init_data:init_data.py:74 Loaded defect types successfully
INFO     app.database.init_data:init_data.py:29 Default data initialization completed
INFO     app:__init__.py:51 Database initialized successfully with SQLAlchemy
INFO     app:__init__.py:63 Application created successfully
INFO     app.database.session:session.py:117 Database tables created successfully
INFO     app.database.init_data:init_data.py:23 Controllers table is empty, but not adding default ones
INFO     app.database.init_data:init_data.py:29 Default data initialization completed
_________________ TestControllersAPI.test_api_get_controllers __________________
tests/test_api.py:98: in test_api_get_controllers
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
        app        = <Flask 'app'>
        client     = <FlaskClient <Flask 'app'>>
        response   = <WrapperTestResponse streamed [404 NOT FOUND]>
        sample_controller = <Контролёр(id=4, имя='Тестовый Контролёр c23ede13', активен=True)>
        self       = <tests.test_api.TestControllersAPI object at 0x7fe8d4442540>
------------------------------ Captured log setup ------------------------------
INFO     app:__init__.py:37 Starting Quality Control Application with config: testing
INFO     app.database.session:session.py:140 Registered database teardown with Flask app
INFO     app.database.session:session.py:46 Created SQLAlchemy engine for database: :memory:
INFO     app.database.session:session.py:117 Database tables created successfully
INFO     app.database.session:session.py:64 Created SQLAlchemy session factory
INFO     app.database.init_data:init_data.py:23 Controllers table is empty, but not adding default ones
INFO     app.database.init_data:init_data.py:54 Created defect category: Второй сорт
INFO     app.database.init_data:init_data.py:54 Created defect category: Доработка
INFO     app.database.init_data:init_data.py:54 Created defect category: Окончательный брак
INFO     app.database.init_data:init_data.py:74 Loaded defect types successfully
INFO     app.database.init_data:init_data.py:29 Default data initialization completed
INFO     app:__init__.py:51 Database initialized successfully with SQLAlchemy
INFO     app:__init__.py:63 Application created successfully
INFO     app.database.session:session.py:117 Database tables created successfully
INFO     app.database.init_data:init_data.py:23 Controllers table is empty, but not adding default ones
INFO     app.database.init_data:init_data.py:29 Default data initialization completed
=============================== warnings summary ===============================
tests/test_api.py: 18 warnings
tests/test_control_records.py: 14 warnings
tests/test_database_layer.py: 13 warnings
tests/test_error_handlers.py: 22 warnings
tests/test_integration.py: 4 warnings
tests/test_quality_metrics_enhancements.py: 9 warnings
tests/test_repositories.py: 19 warnings
tests/test_route_cards.py: 13 warnings
tests/test_shifts.py: 23 warnings
tests/test_validators.py: 29 warnings
  /home/engine/project/app/helpers/logging_config.py:24: ResourceWarning: unclosed file <_io.TextIOWrapper name='/home/engine/project/logs/application.log' mode='a' encoding='UTF-8'>
    logging.basicConfig(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_api.py: 18 warnings
tests/test_control_records.py: 14 warnings
tests/test_database_layer.py: 2 warnings
tests/test_error_handlers.py: 22 warnings
tests/test_integration.py: 1 warning
tests/test_quality_metrics_enhancements.py: 9 warnings
tests/test_repositories.py: 19 warnings
tests/test_route_cards.py: 13 warnings
tests/test_shifts.py: 23 warnings
tests/test_validators.py: 29 warnings
  /home/engine/.local/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:3624: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============================= slowest 10 durations =============================
0.09s setup    tests/test_api.py::TestCurrentShiftAPI::test_api_current_shift_with_active_shift
0.09s setup    tests/test_shifts.py::TestShiftCreationAfterClosure::test_validation_allows_shift_after_closure
0.09s setup    tests/test_route_cards.py::TestRouteCardSearch::test_search_route_card_not_found
0.08s setup    tests/test_error_handlers.py::TestCustomExceptions::test_database_error
0.06s setup    tests/test_api.py::TestQRScanAPI::test_api_qr_scan_invalid_json
0.05s call     tests/test_quality_metrics_enhancements.py::TestCascadeDelete::test_defects_cascade_deleted_with_record
0.04s setup    tests/test_quality_metrics_enhancements.py::TestRepositoryStatisticsEnhancements::test_shift_statistics_includes_quality_rate
0.04s setup    tests/test_quality_metrics_enhancements.py::TestQualityMetricsWithShiftId::test_calculate_metrics_backwards_compatible
0.04s setup    tests/test_api.py::TestDefectTypesAPI::test_api_get_defect_types
0.04s setup    tests/test_repositories.py::TestControlRepositoryAdvanced::test_get_records_count
=========================== short test summary info ============================
FAILED tests/test_api.py::TestCurrentShiftAPI::test_api_current_shift_with_active_shift - assert 404 == 200
 +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
FAILED tests/test_api.py::TestDefectTypesAPI::test_api_get_defect_types - assert 404 == 200
 +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
FAILED tests/test_api.py::TestControllersAPI::test_api_get_controllers - assert 404 == 200
 +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code
================= 3 failed, 178 passed, 314 warnings in 5.93s ==================
